<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–§–∞–±—Ä–∏–∫–∞ —Å–Ω–∞ ‚Äî –ö–æ–ª–µ—Å–æ —É–¥–∞—á–∏</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body {
    font-family: 'Segoe UI', sans-serif;
    text-align: center;
    background: linear-gradient(135deg, #0f1c3f, #1e3a8a);
    color: white;
    margin: 0;
}

.logo {
    margin-top: 25px;
}

.logo img {
    max-width: 280px;
    height: auto;
}

h1 {
    margin-top: 15px;
    font-size: 28px;
}

input {
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    margin-top: 10px;
    text-align: center;
}

#wheel {
    margin: 30px auto;
    width: 520px;
    height: 520px;
    border-radius: 50%;
    border: 10px solid gold;
    position: relative;
    overflow: hidden;
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    box-shadow: 0 0 40px rgba(255, 215, 0, 0.5);
}

.segment {
    position: absolute;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}

button {
    padding: 15px 50px;
    font-size: 18px;
    background: gold;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    margin-top: 20px;
    font-weight: bold;
}

button:disabled {
    background: gray;
}

.pointer {
    width: 0;
    height: 0;
    border-left: 22px solid transparent;
    border-right: 22px solid transparent;
    border-bottom: 45px solid gold;
    margin: auto;
}

#result {
    margin-top: 25px;
    font-size: 22px;
    font-weight: bold;
    min-height: 40px;
}

#winnerPopup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: gold;
    color: black;
    padding: 40px;
    font-size: 26px;
    font-weight: bold;
    border-radius: 20px;
    display: none;
    z-index: 999;
    box-shadow: 0 0 40px rgba(0,0,0,0.6);
}
</style>
</head>
<body>

<div class="logo">
    <img src="logo.png" alt="–§–∞–±—Ä–∏–∫–∞ —Å–Ω–∞">
</div>

<h1>üéØ –õ—É—á—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ–¥–µ–ª–∏</h1>

<input type="text" id="managerName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è">

<div class="pointer"></div>
<div id="wheel"></div>

<button id="spinBtn" onclick="spin()">–ö—Ä—É—Ç–∏—Ç—å</button>

<div id="result"></div>
<div id="winnerPopup"></div>

<audio id="drumSound" src="https://www.soundjay.com/misc/sounds/drum-roll-1.mp3"></audio>

<script>
const prizes = [
"‚≠ê –°—É–ø–µ—Ä: –£–∏–∫–µ–Ω–¥",
"üêé –ö–æ–Ω–Ω—ã–π —Ç—É—Ä",
"üíÜ SPA-–¥–µ–Ω—å",
"–û–±–µ–¥ –Ω–µ–¥–µ–ª—è",
"–¢–∞–∫—Å–∏ –Ω–µ–¥–µ–ª—è",
"–£–∂–∏–Ω —Ä–µ—Å—Ç–æ—Ä–∞–Ω",
"–ë–æ—É–ª–∏–Ω–≥",
"–ö–∏–Ω–æ VIP",
"–ö–∞—Ä—Ç–∏–Ω–≥",
"–ö–∞—Ä–∞–æ–∫–µ",
"–í—ã—Ö–æ–¥–Ω–æ–π",
"–¢—É—Ä –ö–µ—Ç—Ç–∏–∫"
];

const colors = [
"#1e40af","#2563eb","#1d4ed8","#3b82f6",
"#1e3a8a","#1e40af","#2563eb","#1d4ed8",
"#3b82f6","#1e3a8a","#1e40af","#0f172a"
];

const wheel = document.getElementById("wheel");
const segmentAngle = 360 / prizes.length;
const spinBtn = document.getElementById("spinBtn");
const resultDiv = document.getElementById("result");
const drumSound = document.getElementById("drumSound");

prizes.forEach((prize, i) => {

    const segment = document.createElement("div");
    segment.className = "segment";
    segment.style.position = "absolute";
    segment.style.width = "100%";
    segment.style.height = "100%";
    segment.style.transformOrigin = "50% 50%";
    segment.style.transform = `rotate(${i * segmentAngle}deg)`;
    segment.style.clipPath = `polygon(50% 50%, 100% 0, 100% 100%)`;
    segment.style.background = colors[i];

    const text = document.createElement("div");
    text.innerText = prize;

    text.style.position = "absolute";
    text.style.top = "50%";
    text.style.left = "75%";   /* –î–≤–∏–≥–∞–µ–º –±–ª–∏–∂–µ –∫ –∫—Ä–∞—é */
    text.style.transform = `rotate(${segmentAngle / 2}deg) translate(-50%, -50%)`;
    text.style.transformOrigin = "left center";
    text.style.fontSize = "13px";
    text.style.fontWeight = "bold";
    text.style.whiteSpace = "nowrap";
    text.style.pointerEvents = "none";

    segment.appendChild(text);
    wheel.appendChild(segment);
});

let currentRotation = 0;
let hasSpun = false;

function spin() {
    if (hasSpun) return;

    const name = document.getElementById("managerName").value;
    if (!name) {
        alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è!");
        return;
    }

    hasSpun = true;
    spinBtn.disabled = true;

    drumSound.play();

    const randomIndex = Math.floor(Math.random() * prizes.length);
    const extraSpins = 5;
    const finalAngle = (360 * extraSpins) +
        (360 - (randomIndex * segmentAngle) - segmentAngle / 2);

    currentRotation += finalAngle;
    wheel.style.transform = `rotate(${currentRotation}deg)`;

    setTimeout(() => {
        drumSound.pause();

        const winText = name + " –ø–æ–ª—É—á–∞–µ—Ç: " + prizes[randomIndex];
        resultDiv.innerHTML = "üéâ " + winText;

        const popup = document.getElementById("winnerPopup");
        popup.innerHTML = "üéâ " + winText;
        popup.style.display = "block";

        confetti({
            particleCount: 250,
            spread: 120,
            origin: { y: 0.6 }
        });

    }, 4000);
}
</script>


</body>
</html>

